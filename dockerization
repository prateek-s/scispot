* Confinement
apt install build-essential libgsl-dev ruby-gsl mpi-default-dev libboost-mpi-dev libboost-program-options-dev libboost-system-dev libboost-filesystem-dev vim ssh 

We dont need boost_libdir, so remove -L{ } from src/Makefile

ssh is required for mpi!


On GCP, use docker load, not docker import

mpirun -np 2 --host v-020,v-021 docker run -d mdconfin:1 /home/nanoconfinement-md-master/bin/md_simulation_confined_ions

OMPI rank communicated via environment variables. How to pass this to docker? Ugh

https://stackoverflow.com/questions/40229182/simplest-way-of-passing-all-host-environment-variables-to-docker-container

mpirun -np 2 --host v-020,v-021 -x OMP_NUM_THREADS=16 /home/prateeks/nanoconfinement-md-master/bin/md_simulation_confined_ions

1. gcloud compute disks create "disk-1" --zone "us-central1-f" --source-snapshot "snapshot-1" --type "pd-standard"
2. gcloud compute instances create "instance-1" --zone "us-central1-f" --disk name=disk-1,device-name=instance-1,mode=rw,boot=yes

VMNAME=$(curl -H Metadata-Flavor:Google http://metadata/computeMetadata/v1/instance/hostname | cut -d. -f1)

https://slurm.schedmd.com/elastic_computing.html

https://bitsanddragons.wordpress.com/2016/09/02/adding-nodes-to-slurm/


env | grep MPI | grep -v
'MPI_INCLUDE\|MPI_PYTHON\|MPI_LIB\|MPI_BIN\|MPI_COMPILER\|MPI_SYSCONFIG\|MPI_SUFFIX\|MPI_MAN\|MPI_HOME\|MPI_FORTRAN_MOD_DIR'
/root/env.txt
docker run --privileged --env-file /root/env.txt -p 7950-8000:7950-8000
mrmagooey/mpi-mm

* Lulesh 
https://github.com/LLNL/LULESH
edit makefile to use mpic++ and not mpig++ 

 -q              : quiet mode - suppress all stdout
 -i <iterations> : number of cycles to run
 -s <size>       : length of cube mesh along side
 -r <numregions> : Number of distinct regions (def: 11)
 -b <balance>    : Load balance between regions of a domain (def: 1)
 -c <cost>       : Extra cost of more expensive regions (def: 1)
 -f <numfiles>   : Number of files to split viz dump into (def: (np+10)/9)
 -p              : Print out progress
 -v              : Output viz file (requires compiling with -DVIZ_MESH
 -h              : This message

More benchmarks here:
https://asc.llnl.gov/CORAL-benchmarks/#hacc 
